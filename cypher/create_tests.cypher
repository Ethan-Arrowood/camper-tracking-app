// Department, Test, Rank Data
:params data => [
  {
    department: "swimming",
    tests: [
      {
        rank: "loki",
        tests: [
          "crawl",
          "elem. back",
          "survival stroke",
          "jumps/dives",
          "tread water",
          "safety skills"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "survival test",
          "crawl",
          "back crawl",
          "breast",
          "side stroke",
          "sculling",
          "turns",
          "jumps/dives",
          "safety skills",
          "mask/snorkel"
        ]
      },
      {
        rank: "thor",
        tests: [
          "crawl",
          "breast",
          "side stroke",
          "back crawl",
          "jumps and dives",
          "lifesaving",
          "surface dives",
          "safety skills",
          "mask/snorkel",
          "one mile swim"
        ]
      },
      {
        rank: "odin",
        tests: [
          "crawl",
          "breast",
          "back",
          "fly",
          "turns",
          "coach assist",
          "basic water safety",
          "albatross",
          "guarding",
          "teaching"
        ]
      }
    ]
  },
  {
    department: "boating",
    tests: [
      {
        rank: "loki",
        tests: [
          "knowledge",
          "safety rules",
          "basic rowing",
          "boat landings",
          "paddling"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "survival test",
          "knowledge",
          "kayak safety",
          "tyr strokes",
          "kayak strokes",
          "swamp canoe",
          "bow landings",
          "obstacle course"
        ]
      },
      {
        rank: "thor",
        tests: [
          "knots",
          "canoe strokes",
          "canoe rescue",
          "canoe obstacle",
          "kayak strokes",
          "kayak rescue",
          "kayak obstacle",
          "solo landings"
        ]
      },
      {
        rank: "odin",
        tests: [
          "portage",
          "rapids",
          "safety",
          "canoe repair",
          "trip planning",
          "stern trip",
          "kayak skills",
          "teaching"
        ]
      }
    ]
  },
  {
    department: "campcraft",
    tests: [
      {
        rank: "loki",
        tests: [
          "2 trip points",
          "firebuilding",
          "shelter",
          "knife test",
          "knots",
          "philosophy",
          "map skills"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "4 trip points",
          "no trace fire",
          "one pot meal",
          "stove use",
          "saw use",
          "knots ",
          "shelter",
          "packing",
          "first aid",
          "map/compass"
        ]
      },
      {
        rank: "thor",
        tests: [
          "8 trip points",
          "rainy day fire",
          "stove care",
          "axe use",
          "lashings",
          "solo experience",
          "first aid",
          "trip planning",
          "trip leading"
        ]
      },
      {
        rank: "odin",
        tests: ["16 trip points", "first aid", "teaching", "project"]
      }
    ]
  },
  {
    department: "exploring",
    tests: [
      {
        rank: "loki",
        tests: [
          "exploration 1",
          "exploration 2",
          "exploration 3",
          "5 trees id",
          "5 flowers id",
          "3 ferns id",
          "poison ivy id",
          "stop, look, & listen 1",
          "stop, look, & listen 2",
          "stop, look, & listen 3",
          "pay it forward"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "exploration 1",
          "exploration 2",
          "exploration 3",
          "5 trees id",
          "5 flowers id",
          "4 clouds",
          "5 insects id",
          "stop, look, & listen 1",
          "stop, look, & listen 2",
          "stop, look, & listen 3",
          "pay it forward"
        ]
      },
      {
        rank: "thor",
        tests: ["lead/teach", "edible plants", "thor project"]
      },
      { rank: "odin", tests: ["quality project"] }
    ]
  },
  {
    department: "sailing",
    tests: [
      {
        rank: "loki",
        tests: [
          "parts/terms",
          "knots",
          "safety rules",
          "jib handling",
          "rig/stow",
          "capsize"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "parts/terms",
          "crew",
          "tack & jibe",
          "racing theory",
          "knots",
          "mooring",
          "points of sail"
        ]
      },
      {
        rank: "thor",
        tests: [
          "parts/terms",
          "sailboat care",
          "spinnaker",
          "thor skipper",
          "nautical navigation",
          "emergencies",
          "teaching"
        ]
      },
      {
        rank: "odin",
        tests: ["sailboat care", "knots", "organize race", "teaching"]
      }
    ]
  },
  {
    department: "archery",
    tests: [
      {
        rank: "loki",
        tests: ["position", "scoring", "aiming", "test", "knowledge"]
      },
      {
        rank: "tyr",
        tests: ["position", "scoring", "aiming", "test", "knowledge"]
      },
      { rank: "thor", tests: ["position", "aiming", "test", "knowledge"] },
      { rank: "odin", tests: ["position", "aiming", "test", "coaching"] }
    ]
  },
  {
    department: "athletics",
    tests: [
      {
        rank: "loki",
        tests: ["fitness", "sport 1", "sport 2", "test 1", "test 2"]
      },
      {
        rank: "tyr",
        tests: ["fitness form", "sport 1", "sport 2", "test 1", "test 2"]
      },
      {
        rank: "thor",
        tests: ["fitness", "sport 1", "sport 2", "test 1", "test 2"]
      },
      {
        rank: "odin",
        tests: ["fitness/form", "sport 1", "sport 2", "test 1", "test 2"]
      }
    ]
  },
  {
    department: "photography",
    tests: [
      {
        rank: "loki",
        tests: ["35mm camera", "developing", "printing", "four prints"]
      },
      {
        rank: "tyr",
        tests: [
          "35mm camera",
          "solo developing",
          "solo printing",
          "6 advanced prints"
        ]
      },
      { rank: "thor", tests: ["instruct", "6 advanced prints"] },
      { rank: "odin", tests: ["project", "instruct"] }
    ]
  },
  {
    department: "tennis",
    tests: [
      {
        rank: "loki",
        tests: ["ground strokes", "service", "scoring", "loki terms"]
      },
      { rank: "tyr", tests: ["service", "volley", "skills", "terms"] },
      {
        rank: "thor",
        tests: [
          "smash",
          "lob",
          "skills",
          "terms",
          "teaching (4)",
          "linesman (2)"
        ]
      },
      {
        rank: "odin",
        tests: ["skills", "terms", "teaching (8)", "umpire (2)", "tournament"]
      }
    ]
  },
  {
    department: "riflery",
    tests: [
      {
        rank: "loki",
        tests: [
          "safety skills",
          "marksmanship",
          "sling use",
          "scoring",
          "care/cleaning"
        ]
      },
      { rank: "tyr", tests: ["positions", "marksmanship", "sights"] },
      {
        rank: "thor",
        tests: ["positions", "marksmanship", "coaching", "knowledge"]
      },
      {
        rank: "odin",
        tests: ["knowledge", "marksmanship", "organize match", "coaching"]
      }
    ]
  },
  {
    department: "arts",
    tests: [
      {
        rank: "loki",
        tests: ["project 1", "project 2", "project 3", "materials"]
      },
      {
        rank: "tyr",
        tests: ["project 1", "project 2", "project 3", "materials"]
      },
      { rank: "thor", tests: ["composition", "teaching", "project"] },
      { rank: "odin", tests: ["materials", "teaching", "project"] }
    ]
  },
  {
    department: "shop",
    tests: [
      { rank: "loki", tests: ["tools", "wood terms", "design", "project"] },
      { rank: "tyr", tests: ["hand tool id", "power tools", "project"] },
      {
        rank: "thor",
        tests: ["tool care", "table saw", "design", "project"]
      },
      { rank: "odin", tests: ["project", "teaching (8)"] }
    ]
  },
  {
    department: "music",
    tests: [
      { rank: "loki", tests: ["sing 'skol'", "choir", "knowledge"] },
      { rank: "tyr", tests: ["musical", "camp/cf song", "knowledge"] },
      {
        rank: "thor",
        tests: ["lead or solo", "song leading", "knowledge"]
      },
      { rank: "odin", tests: ["teaching (8)", "performance", "project"] }
    ]
  },
  {
    department: "biking",
    tests: [
      {
        rank: "loki",
        tests: [
          "bike/helmet size",
          "bike check",
          "road safety",
          "brake use",
          "gear shifting",
          "downhill control",
          "bike parts",
          "tube repair"
        ]
      },
      {
        rank: "tyr",
        tests: [
          "2 trip points",
          "obstacle course",
          "tyr riding skills",
          "tool names/uses",
          "chain clean/lube",
          "gear/brake clean/lube",
          "brake pad maintenance",
          "diagnosing the bike",
          "gear adjustment",
          "saddle adjust/replace"
        ]
      },
      {
        rank: "thor",
        tests: [
          "4 trip points",
          "advanced obstacle",
          "bike lake",
          "advanced skills",
          "plan/lead trip",
          "lead assembly",
          "chainlink remove",
          "brake cable replace",
          "gear cable adjustment",
          "teaching (3)"
        ]
      },
      {
        rank: "odin",
        tests: [
          "4 trip points",
          "develop obstacle",
          "teaching (10)",
          "hub bearings replace",
          "crank bearing replace",
          "headset bearing replace",
          "pedal bearing replace",
          "cog removal",
          "bike assembly"
        ]
      }
    ]
  }
]

// Create departments, tests, and ranks
UNWIND $data AS data
CREATE (d:Department {name: data.department})
WITH data, d
UNWIND data.tests as rt
MERGE (r:Rank {name: rt.rank})
CREATE (tc:TestCollection {name: d.name + r.name}),
      (tc)-[:DEPARTMENT]->(d),
      (tc)-[:RANK]->(r)
WITH d, rt, tc
UNWIND rt.tests as test
CREATE (t:Test {name: test}),
      (tc)-[:TEST]->(t)